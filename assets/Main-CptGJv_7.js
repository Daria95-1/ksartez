import{t as u,r as E,d as P,j as y}from"./index-DW2gLcvx.js";function w(){return w=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},w.apply(this,arguments)}const tt=(r,t)=>{const e={};for(const n in r)t.indexOf(n)===-1&&(e[n]=r[n]);return e},et=u.createContext(null),q=u.createContext(null),rt=r=>t=>u.createElement(q.Consumer,null,e=>u.createElement(r,w({parent:e},t))),it=(r=[])=>{const[t,e]=E.useState(!1),n=E.useRef(r),s=(()=>{const a=E.useContext(et);if(a===null)throw new Error("Couldn't find Yandex.Maps API in the context. Make sure that hook useYMaps is inside <YMaps /> provider");return a})(),p=s.getApi();return E.useEffect(()=>{s.load().then(()=>Promise.all(n.current.map(s.loadModule))).then(()=>e(!0))},[]),t&&p?p:null},ct=()=>{},at=["onLoad","onError","modules","apiLoader"];function V(r,t=!1,e=[]){return n=>{const{width:s,height:p,modules:a=[],onLoad:d=ct}=n,i=it(e.concat(a)),o=!t||!!i,f=tt(n,at);return E.useEffect(()=>i?d(i):void 0,[i]),o?u.createElement(r,w({ymaps:i},f)):u.createElement("div",{style:{width:s,height:p}})}}const pt=typeof window<"u",H={lang:"ru_RU",load:"",ns:"",mode:"release"},dt=r=>{const{version:t="2.1",enterprise:e=!1,query:n={lang:"ru_RU",load:"",ns:""},preload:s=!1,children:p}=r,a=E.useRef((d=>{const{query:i=H}=d,o=Date.now().toString(32),f=i.ns||"",b="__yandex-maps-api-onload__$$"+o,v="__yandex-maps-api-onerror__$$"+o,j=pt?window:{},A={};let R;const J=()=>f?j[f]:R,Q=()=>{delete j[b],delete j[v]};return{load:()=>{if(J())return Promise.resolve(R);if(A[f])return A[f];const D={onload:b,onerror:v,...H,...i},B=Object.keys(D).map(_=>`${_}=${D[_]}`).join("&"),L=[`https://${d.enterprise?"enterprise.":""}api-maps.yandex.ru`,d.version,"?"+B].join("/");return A[f]=new Promise((_,Z)=>{j[b]=g=>{Q(),g.ready(()=>{R=g,_(g)})},j[v]=g=>{Q(),Z(g)},(g=>new Promise(($,F)=>{const O=document.createElement("script");O.type="text/javascript",O.onload=$,O.onerror=F,O.src=g,O.async=!0,document.head.appendChild(O)}))(L).catch(j[v])}),A[f]},getApi:J,loadModule:D=>new Promise((B,L)=>{R.modules.require(D).done(_=>{_.forEach(Z=>{((g,$,F,O=!1)=>{const Y=typeof $=="string"?$.split("."):$.slice();let z,k=g;for(;Y.length>1;)z=Y.shift(),k[z]||(k[z]={}),k=k[z];const X=Y[0];k[X]=O===!0&&k[X]||F})(R,D,Z,!0)}),B(R)},L)})}})({version:t,enterprise:e,query:n}));return E.useEffect(()=>{s&&a.current.load()},[a.current]),u.createElement(et.Provider,{value:a.current},p)},K=/^on(?=[A-Z])/;function l(r){return Object.keys(r).reduce((t,e)=>{if(K.test(e)){const n=e.replace(K,"").toLowerCase();t._events[n]=r[e]}else t[e]=r[e];return t},{_events:{}})}function C(r,t,e){typeof e=="function"&&r.events.add(t,e)}function x(r,t,e){typeof e=="function"&&r.events.remove(t,e)}function M(r,t,e){Object.keys(Object.assign({},t,e)).forEach(n=>{t[n]!==e[n]&&(x(r,n,t[n]),C(r,n,e[n]))})}const nt=r=>"default"+r.charAt(0).toUpperCase()+r.slice(1);function h(r,t){return r[t]!==void 0||r[nt(t)]===void 0}function c(r,t,e){return(h(r,t)?r[t]:r[nt(t)])||e}function m(r,t,e=null){if(r!==t){if(r&&("current"in r?r.current=null:typeof r=="function"&&r(null)),!t)return;"current"in t?t.current=e:typeof t=="function"&&t(e)}}function st(r){const{width:t,height:e,style:n,className:s}=r;return n!==void 0||s!==void 0?Object.assign({},n&&{style:n},s&&{className:s}):{style:{width:t,height:e}}}class lt extends u.Component{constructor(t){super(t),this.state={error:null,errorInfo:null}}componentDidCatch(t,e){const{onError:n=(()=>{})}=this.props;n(t),this.setState({error:t,errorInfo:e})}render(){return this.state.error?null:this.props.children}}const G=r=>({onError:t,...e})=>u.createElement(lt,{onError:t},u.createElement(r,e));class S extends u.Component{constructor(){super(),this.instance=null,this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this.instance=S.mountObject(this._parentElement,this.props.ymaps.Map,this.props),this.setState({instance:this.instance})}componentDidUpdate(t){this.instance!==null&&S.updateObject(this.instance,t,this.props)}componentWillUnmount(){S.unmountObject(this.instance,this.props)}render(){const t=st(this.props),e=l(this.props),n=tt(e,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return u.createElement(q.Provider,{value:this.state.instance},u.createElement("div",w({ref:this._getRef},t,n),this.props.children))}static mountObject(t,e,n){const{instanceRef:s,_events:p}=l(n),a=new e(t,c(n,"state"),c(n,"options"));return Object.keys(p).forEach(d=>C(a,d,p[d])),m(null,s,a),a}static updateObject(t,e,n){const{_events:s,instanceRef:p}=l(n),{_events:a,instanceRef:d}=l(e);if(h(n,"state")){const i=c(e,"state",{}),o=c(n,"state",{});i.type!==o.type&&t.setType(o.type),i.behaviors!==o.behaviors&&(i.behaviors&&t.behaviors.disable(i.behaviors),o.behaviors&&t.behaviors.enable(o.behaviors)),o.zoom&&i.zoom!==o.zoom&&t.setZoom(o.zoom),o.center&&i.center!==o.center&&t.setCenter(o.center),o.bounds&&i.bounds!==o.bounds&&t.setBounds(o.bounds)}if(h(n,"options")){const i=c(e,"options"),o=c(n,"options",{});i!==o&&t.options.set(o)}c(e,"width")===c(n,"width")&&c(e,"height")===c(n,"height")||t.container.fitToViewport(),M(t,a,s),m(d,p,t)}static unmountObject(t,e){const{instanceRef:n,_events:s}=l(e);t!==null&&(Object.keys(s).forEach(p=>x(t,p,s[p])),t.destroy(),m(n))}}const ot=G(V(S,!0,["Map"]));ot.defaultProps={width:320,height:240};class U extends u.Component{constructor(){super(),this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this._mounted=!0,this.props.ymaps.panorama.isSupported()&&U.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then(t=>this._mounted&&this.setState({instance:t}))}componentDidUpdate(t){this.state.instance!==null&&U.updateObject(this.state.instance,t,this.props)}componentWillUnmount(){this._mounted=!1,U.unmountObject(this.state.instance,this.props)}render(){const t=st(this.props);return u.createElement("div",w({ref:this._getRef},t))}static mountObject(t,e,n){const{instanceRef:s,_events:p}=l(n),a=c(n,"point"),d=c(n,"locateOptions"),i=c(n,"options");return new Promise((o,f)=>{e.locate(a,d).done(b=>{if(b.length>0){const v=new e.Player(t,b[0],i);m(null,s,v),Object.keys(p).forEach(j=>C(v,j,p[j])),o(v)}},f)})}static updateObject(t,e,n){const{_events:s,instanceRef:p}=l(n),{_events:a,instanceRef:d}=l(e);if(h(n,"options")){const i=c(e,"options"),o=c(n,"options");i!==o&&t.options.set(o)}if(h(n,"point")){const i=c(n,"point"),o=c(e,"point"),f=c(n,"locateOptions");i!==o&&t.moveTo(i,f)}M(t,a,s),m(d,p,t)}static unmountObject(t,e){const{instanceRef:n,_events:s}=l(e);t!==null&&(Object.keys(s).forEach(p=>x(t,p,s[p])),m(n))}}const ut=G(V(U,!0,["panorama.isSupported","panorama.locate","panorama.createPlayer","panorama.Player"]));ut.defaultProps={width:320,height:240};class N extends u.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=N.mountControl(this.props.ymaps.control[this.props.name],this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&N.updateControl(this.instance,t,this.props)}componentWillUnmount(){N.unmountControl(this.instance,this.props)}render(){return u.createElement(q.Provider,{value:this.state.instance},this.props.children)}static mountControl(t,e){const{instanceRef:n,parent:s,lazy:p,_events:a}=l(e),d=new t({data:c(e,"data"),options:c(e,"options"),state:c(e,"state"),mapTypes:c(e,"mapTypes"),lazy:p});if(Object.keys(a).forEach(i=>C(d,i,a[i])),s&&s.controls&&typeof s.controls.add=="function")s.controls.add(d);else{if(!s||!s.add||typeof s.add!="function")throw new Error(`No parent found to mount ${e.name}`);s.add(d)}return m(null,n,d),d}static updateControl(t,e,n){const{_events:s,instanceRef:p}=l(n),{_events:a,instanceRef:d}=l(e);if(h(n,"options")){const i=c(e,"options"),o=c(n,"options");i!==o&&t.options.set(o)}if(h(n,"data")){const i=c(e,"data"),o=c(n,"data");i!==o&&t.data.set(o)}if(h(n,"state")){const i=c(e,"state"),o=c(n,"state");i!==o&&t.state.set(o)}if(h(n,"mapTypes")){const i=c(e,"mapTypes"),o=c(n,"mapTypes");i!==o&&(t.removeAllMapTypes(),o.forEach(f=>t.addMapType(f)))}M(t,a,s),m(d,p,t)}static unmountControl(t,e){const{instanceRef:n,parent:s,_events:p}=l(e);t!==null&&(Object.keys(p).forEach(a=>x(t,a,p[a])),s.controls&&typeof s.controls.remove=="function"?s.controls.remove(t):s.remove&&typeof s.remove=="function"&&s.remove(t),m(n))}}class I extends u.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=I.mountObject(this.props.ymaps.Clusterer,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.state.instance!==null&&I.updateObject(this.instance,t,this.props)}componentWillUnmount(){I.unmountObject(this.instance,this.props)}render(){return u.createElement(q.Provider,{value:this.state.instance},this.props.children)}static mountObject(t,e){const{instanceRef:n,parent:s,_events:p}=l(e),a=new t(c(e,"options"));if(Object.keys(p).forEach(d=>C(a,d,p[d])),s.geoObjects&&typeof s.geoObjects.add=="function")s.geoObjects.add(a);else{if(!s.add||typeof s.add!="function")throw new Error("No parent found to mount Clusterer");s.add(a)}return m(null,n,a),a}static updateObject(t,e,n){const{_events:s,instanceRef:p}=l(n),{_events:a,instanceRef:d}=l(e);if(h(n,"options")){const i=c(e,"options"),o=c(n,"options");i!==o&&t.options.set(o)}M(t,a,s),m(d,p,t)}static unmountObject(t,e){const{instanceRef:n,parent:s,_events:p}=l(e);t!==null&&(Object.keys(p).forEach(a=>x(t,a,p[a])),s.geoObjects&&typeof s.geoObjects.remove=="function"?s.geoObjects.remove(t):s.remove&&typeof s.remove=="function"&&s.remove(t),m(n))}}class W extends u.Component{constructor(){super(),this.state={instance:null}}componentDidMount(){const t=W.mountObject(this.props.ymaps.ObjectManager,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&W.updateObject(this.instance,t,this.props)}componentWillUnmount(){W.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,e){const{instanceRef:n,parent:s,_events:p}=l(e),a=c(e,"options",{}),d=c(e,"features",{}),i=c(e,"filter",null),o=c(e,"objects",{}),f=c(e,"clusters",{}),b=new t(a);if(b.add(d||[]),b.setFilter(i),b.objects.options.set(o),b.clusters.options.set(f),Object.keys(p).forEach(v=>C(b,v,p[v])),s.geoObjects&&typeof s.geoObjects.add=="function")s.geoObjects.add(b);else{if(!s.add||typeof s.add!="function")throw new Error("No parent found to mount ObjectManager");s.add(b)}return m(null,n,b),b}static updateObject(t,e,n){const{_events:s,instanceRef:p}=l(n),{_events:a,instanceRef:d}=l(e);if(h(n,"options")){const i=c(e,"options"),o=c(n,"options");i!==o&&t.options.set(o)}if(h(n,"objects")){const i=c(e,"objects"),o=c(n,"objects");i!==o&&t.objects.options.set(o)}if(h(n,"clusters")){const i=c(e,"clusters"),o=c(n,"clusters");i!==o&&t.clusters.options.set(o)}if(h(n,"filter")){const i=c(e,"filter"),o=c(n,"filter");i!==o&&t.setFilter(o)}if(h(n,"features")){const i=c(e,"features"),o=c(n,"features");i!==o&&(t.remove(i),t.add(o))}M(t,a,s),m(d,p,t)}static unmountObject(t,e){const{instanceRef:n,parent:s,_events:p}=l(e);t!==null&&(Object.keys(p).forEach(a=>x(t,a,p[a])),s.geoObjects&&typeof s.geoObjects.remove=="function"?s.geoObjects.remove(t):s.remove&&typeof s.remove=="function"&&s.remove(t),m(n))}}class T extends u.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const{name:t,ymaps:e,dangerZone:n}=this.props,s=T.mountObject(n&&typeof n.modifyConstructor=="function"?n.modifyConstructor(e[t]):e[t],this.props);this.instance=s,this.setState({instance:s})}componentDidUpdate(t){this.instance!==null&&T.updateObject(this.instance,t,this.props)}componentWillUnmount(){T.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,e){const{instanceRef:n,parent:s,_events:p}=l(e),a=new t(c(e,"geometry"),c(e,"properties"),c(e,"options"));if(Object.keys(p).forEach(d=>C(a,d,p[d])),s&&s.geoObjects&&typeof s.geoObjects.add=="function")s.geoObjects.add(a);else{if(!s||!s.add||typeof s.add!="function")throw new Error(`No parent found to mount ${e.name}`);s.add(a)}return m(null,n,a),a}static updateObject(t,e,n){const{_events:s,instanceRef:p}=l(n),{_events:a,instanceRef:d}=l(e);if(h(n,"geometry")){const i=c(e,"geometry",{}),o=c(n,"geometry",{});Array.isArray(o)&&o!==i?Array.isArray(o[0])&&typeof o[1]=="number"?(t.geometry.setCoordinates(o[0]),t.geometry.setRadius(o[1])):t.geometry.setCoordinates(o):typeof o=="object"&&(o.coordinates!==i.coordinates&&t.geometry.setCoordinates(o.coordinates),o.radius!==i.radius&&t.geometry.setRadius(o.radius))}if(h(n,"properties")){const i=c(e,"properties"),o=c(n,"properties");i!==o&&t.properties.set(o)}if(h(n,"options")){const i=c(e,"options"),o=c(n,"options");i!==o&&t.options.set(o)}M(t,a,s),m(d,p,t)}static unmountObject(t,e){const{instanceRef:n,parent:s,_events:p}=l(e);t!==null&&(Object.keys(p).forEach(a=>x(t,a,p[a])),s.geoObjects&&typeof s.geoObjects.remove=="function"?s.geoObjects.remove(t):s.remove&&typeof s.remove=="function"&&s.remove(t),m(n))}}var ht=G(rt(V(r=>u.createElement(T,w({},r,{name:"Placemark"})),!0,["Placemark"])));const mt=[{id:1,district:"Раменское",title:"Борисоглебское озеро",description:"На месте водоёма находилась лесная поляна, на которой молодой пастух пас своих овец. Однажды, задремав, он увидел сон, в котором из леса вышел сгорбленный седовласый старец и сказал: «Уйди, сын мой, нога человека не должна ступать по этому месту». Пастух проснулся и поспешил увести стадо с поляны в лес. В тот же момент мощным потоком хлынула туда вода, ушедшая из озера у деревни Сафоново.",coords:[55.57267,38.223917]},{id:2,district:"Домодедово",title:"Пещеры Сьяны",description:"Пещеры Сьяны — система пещер, искусственно созданная для добычи известняка. По легендам, в системе тёмных пещер к потерявшимся путникам приходит привидение Двуликая: если совесть у человека чиста, то дух приходит в образе девушки и помогает найти выход на поверхность, нечистые душой люди и хулиганы видят старика, который уводит их вглубь системы.",coords:[55.485234,37.787475]},{id:3,district:"Шатура",title:"Озеро Смердячье",description:"Озеро Смердячье находится в глухом Шатурском лесу. По легенде, на этом месте некогда стояла церковь, которая в один миг провалилась под землю вместе с дьячком. С тех пор вода стала цветом как кровь, а воздух наполнился смрадом. Говорят, что прежнее название озера — «Смерть дьячья» — со временем упростилось до «Смердячьего».",coords:[55.735,39.8222222]},{id:4,district:"Шатура",title:"Шушмор",description:"Шушмор — мистическая аномальная зона в лесах Шатурского района, известная бесследными исчезновениями людей и загадочными явлениями. Здесь расположено древнее каменное сооружение — каменная полусфера, окружённое мегалитами и загадочными квадратными берёзами. По легендам, это место использовалось для языческих ритуалов и жертвоприношений.",coords:[55.45035,40.07538]},{id:5,district:"Мытищи",title:"Легенда о Екатерининском водопроводе",description:"Согласно легенде, однажды Екатерина II проезжала мимо города и захотела пить, но обоз с водой отстал от императорской кареты. Тогда Екатерине предложили напиться из мытищинского источника. Вода так понравилась царственной особе, что, принимая решение о строительстве первого российского водопровода, она вспомнила эту случайную остановку в Мытищах.",coords:[55.828889,37.655556]},{id:6,district:"Серпухов",title:"Легенда о монастырских подземных ходах",description:". По преданию, подземные ходы связывали между собой Серпуховский кремль на Соборной горе, Высоцкий и Владычный монастыри. Каждая обитель имела подземный ход, ведущей к реке Наре.",coords:[54.915325,37.405279]},{id:7,district:"Серпухов",title:"Легенда о призрачной страже",description:"Согласно распространённой легенде, древние сокровища города ревностно охраняют призраки монахов. Тот, кто потревожит их покой, рискует навсегда остаться в подземной могиле.",coords:[54.922515,37.4119495]},{id:8,district:"Красногорск",title:"Легенда о названии рабочего посёлка Нахабино",description:"Легенда гласит, что в давние времена здесь орудовала шайка бандитов, купцов злодеи поджидали под мостом через речку Нахабинку. Разбогатев, решили построить село, а так как на жизнь награбили — «нахапали», то и село назвали Нахабино.",coords:[55.846667,37.175278]},{id:9,district:"Жуковский",title:"Легенда о микрорайоне «Старый город»",description:"Считается, что он строился в соответствии с «розой ветров», чтобы внутри дворов никогда не было ветра, а макеты зданий для проверки продувались в аэродинамических трубах ЦАГИ.",coords:[55.593258,38.122138]},{id:10,district:"Жуковский",title:"Легенда о секретном метро",description:"Есть легенда о построенной при Сталине секретной ветке метрополитена, которая ведёт от станции московского метро «Партизанская» прямо на взлётную полосу ЛИИ. Считается, что во время войны Сталин оставался в Москве до последнего, планируя покинуть столицу по этой ветке.",coords:[55.572778,38.14]},{id:11,district:"Заречье",title:"Пирожная гора",description:"В близи небольшого городка с тупиковой дорогой есть небольшая гора. Гора называется Пирожная, потому что слои её песчано-глиняного тела похожи на разрез пирога. Пирожная гора и болота вокруг неё полны оврагов, заросших высокой травой и маленькими деревцами. И часто в них находят мелкие ржавые монетки, подвески, колечки и прочие железки, явно не один год пролежавшие в этой земле. И легенды гласят – это крупицы клада, который князь Серебряный, известный многим по одноимённому роману А.К. Толстого, зарыл здесь давным-давно. Как знать, может быть, однажды этот клад найдут…",coords:[56.1354508,38.1155714]},{id:12,district:"Раменское",title:"Статуя Крокодил Гена, Чебурашка и Шапокляк",description:"Все хоть раз в своей жизни встречали статую, исполняющую желания, будь то пёс на Площади Революции или водоноска с разбитым кувшином в Царскосельском саду. Неудивительно, что в какой-то момент появилась такая статуя, связанная с персонажем литературного произведения. Например, статуя Шапокляк в Раменском. Местные верят, что, если потереть нос старушке из книги Эдуарда Успенского, то загаданное в этот миг желание обязательно сбудется.",coords:[55.565856,38.23495]}],ft=P.div`
  flex: 1;
  width: 100%;
  height: 100%;
  position: relative;
`,bt=P.div`
  position: absolute;
  top: 12.5rem;
  right: 20rem;
  max-width: 30rem;
  background: ${({theme:r})=>r.white};
  border: 0.1rem solid ${({theme:r})=>r.grey};
  border-radius: 0.5rem;
  padding: 0.9rem;
  box-shadow: 0 0.1rem 0.6rem rgba(0, 0, 0, 0.2);
  z-index: 10;
`,yt=P.button`
  position: absolute;
  top: 0.3rem;
  right: 0.3rem;
  border: none;
  background: transparent;
  font-size: 1rem;
  cursor: pointer;
`,vt=P.button`
  margin-top: 0.6rem;
  padding: 0.3rem 1rem;
  border-radius: 1rem;
  border: none;
  background: ${({theme:r})=>r.lightOrange};
  cursor: pointer;

  &:hover {
    background: ${({theme:r})=>r.orange};
  }
`,jt=(r,t=170)=>r.length<=t?r:r.slice(0,t).trimEnd()+"...",gt=()=>{const[r,t]=E.useState(null),e=s=>{t(s)},n=()=>{t(null)};return y.jsxs(ft,{children:[y.jsx(dt,{children:y.jsx(ot,{defaultState:{center:[55.751244,37.618423],zoom:8},style:{width:"100%",height:"100%"},children:mt.map(s=>y.jsx(ht,{geometry:s.coords,options:{preset:"islands#redIcon"},onClick:()=>e(s)},s.id))})}),r&&y.jsxs(bt,{children:[y.jsx(yt,{onClick:n,children:"✕"}),y.jsx("h3",{children:r.title}),y.jsx("p",{children:jt(r.description)}),y.jsx(vt,{onClick:()=>{},children:"Подробнее"})]})]})},Ot=P.div`
  flex: 1;
  height: 100vh;
  width: 100vw;
  position: relative;
`,Et=P.main`
  flex: 1;
  display: flex;
  height: 100%;
  width: 100%;
  position: relative;
`,Ct=()=>y.jsx(Ot,{children:y.jsx(Et,{children:y.jsx(gt,{})})});export{Ct as Main};
